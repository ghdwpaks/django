{% extends 'header.html' %}
{% block con %}
{% load mathfilters %}

<div align="left" style=" margin-left: 1%;">

    <table class="table table-bordered" border="0" style="width: 60%;">
        <tr>
            <th  class="btd" style="width: 25%">작성자 : </th>
            <td  class="btd" style="width: 25%">{{ boardobj.writernick }}</td>
            <th  class="btd" style="width: 25%">작성일자 : </th>
            <td  class="btd" style="width: 25%">{{ boardobj.credate }}</td>
        </tr>   
        <tr>
            <td class="btd" colspan="2" >{{ boardobj.name }}</td> 
            <td class="btd" colspan="2" rowspan="4">
                <h6>boardobj.getfilename : {{ boardobj.getfilename }}</h6>
                <h6>boardobj.getthum : {{ boardobj.getthum }}</h6>
                <h6>boardobj.getpicture : {{ boardobj.getpicture }}</h6>
                {% if not boardobj.getpicture == "" %}
                    <h6>4</h6>
                    <img style="height: 300px;" src="/media/C%3A/workspace/django/dwm/media/{{ boardobj.getpicture }}" height="150px">
                {% elif not boardobj.getthum == "" or boardobj.getthum == '/media/nnopho.jpg'%}
                    <h6>2</h6>
                    <img style="height: 300px;" src="/media/C%3A/workspace/django/dwm{{ boardobj.getthum }}" height="150px">
                {% endif %}
            </td> 
        </tr>
        <tr>
            <td class="btd" colspan="2" rowspan="3">{{ boardobj.comment }}</td>
        </tr>
        <tr></tr>
        <tr></tr>
        <tr>
            <th class="btd">조회수 : </th>
            <td class="btd">{{ boardobj.hits }}</td>
            <td colspan="2">
                <!--<input class="btn btn-outline-success btn-lg btn-block" type="button" value="DOWNLOAD" onclick="down()">-->
                {% if  boardobj.getfilename  == None or  boardobj.getfilename  == "" %}
                    <a href="{% url 'board:down' %}?downtarget={{ boardobj.getthum }}"><h5>DOWNLOAD CONTENT</h5></a>
                {% else %}
                    <a href="{% url 'board:down' %}?downtarget={{ boardobj.getfilename }}"><h5>DOWNLOAD CONTENT</h5></a>
                {% endif %}
            </td>
        </tr>
        <tr>
            <td>
                <input class="btn btn-outline-dark" type="button " value="BACK" onclick="history_back()">
            </td>
            {% if user.username == boardobj.writerops.username %}
                <td>
                    <input class="btn  btn-outline-primary" type="button" value="MOD" onclick="gomod()">
                </td>
            {% endif %}
        </tr>
    </table>
</div>
<br><br>
<div align="left" style=" margin-left: 1%;">
    <table class="table table-bordered" style="width: 60%;">
        {% if user.is_authenticated %}
        <tr>
            <form action="/board/reply/{{boardobj.id}}" method="post">
                {% csrf_token %}
                <td style="width: 20%;"><button class="btn btn-outline-success">COMMENT</button></td>
                <td style="width: 80%;" colspan="3">
                        <textarea name="reply_comment" cols="60" rows="1"></textarea>
                </td>
            </form>
        </tr>
        {% endif %}
        {% for i in replyobj %}
        <tr>
            <td>{{ i.reply_writerops.nickname }}</td>
            <td style="padding: 0px; margin: 0px;"><img src="/media/{{ i.reply_writerops.photo }}" style="height: 40px; padding: 0px; margin: 0px;"></td>
            <td>{{ i.credate }}</td>
            {% if user.username == i.reply_writerops.username %}
            <td style="width: 10%;"><button class="btn btn-outline-danger" style="height: 25px; width: 35px; margin: 0px; padding: 0px;" onclick="goreplydel('{{ i.id }}')">DEL</button></td>
            {% endif %}
        </tr>
        
        <tr>
            <td colspan="3">{{ i.reply_comment }}</td>
        </tr>
        {% endfor %}
    </table>
</div>
<div style="height: 60%;"></div>
<script>
    function down() {
        location.href='/board/down/'
    }
    function gomod() {
        location.href='/board/mod/{{boardobj.id}}'
    }
    function goreplydel(tr) {
        location.href='/board/reply/del/'+tr+'/{{boardobj.id}}'
    }
    function history_back() {
        history.back()
    }
</script>
<style>
    .btnb {
        margin: 30px;
        padding: 20px;
    }
    .btd {
        text-align: left;
        padding: 30px;
    }
</style>
{% endblock %}